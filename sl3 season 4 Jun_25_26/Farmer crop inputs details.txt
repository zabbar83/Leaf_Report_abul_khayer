Select  fa.season_name              AS cropYear,
        fa.area_id                 AS areaId,
        fa.area_name                 AS areaName,
        fa.zone_id                 AS zoneId,
        fa.zone_name                 AS zoneName,
        fa.sub_area_id             AS subAreaId,
        fa.sub_area_name             AS subAreaName,
        fa.village_id              AS villageId,
        fa.village_name              AS villageName,
        fa.farmer_reg_number             AS farmerRegNum,
        fa.farmer_name                 AS farmerName,
        fa.farmer_father_name          AS fatherName,
        fa.farmer_category             AS category,
        case when f.is_active='true' then 'ACTIVE' else 'INACTIVE' end AS farmerStatus,
        fa.land_acreage             AS cropAcre,
        0                           AS targetQty,
        fa.variety_name              AS varietyCode,
        li.item_name                AS itemsName,
        li.unit                     AS umo,
        fld.items_rate              AS unitPrice,
        fld.quantity              AS unitQty,
        fld.total_amount            totalLoanAmount
FROM    (select * from farmer_agreement
                  Where season_name IN (
                            SELECT
                                fiscal_year
                            FROM    season s
                            where   s.id = :seasonId
                            )
                    AND     (case when :areaId is not null then area_id = :areaId else true end)
                    AND     (case when :zoneId is not null then zone_id = :zoneId else true end)
                    AND     (case when :subAreaId is not null then sub_area_id = :subAreaId else true end)
                    AND     (case when :villageId is not null then village_id = :villageId else true end)
                  ) fa
INNER    JOIN farmer f ON f.id=fa.farmer_id
LEFT    JOIN farmer_loan_requests flr ON fa.id=flr.farmer_agreement_id
LEFT    JOIN farmer_loan_main flm ON flr.id = flm.farmer_loan_request_id
LEFT    JOIN farmer_loan_details fld ON flm.id = fld.loan_main_id
LEFT    JOIN loan_items li ON fld.items_id = li.id
ORDER   BY fa.area_id, fa.zone_id, fa.sub_area_id, fa.village_id, fa.farmer_reg_number
